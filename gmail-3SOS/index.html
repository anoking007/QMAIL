<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gmail-3SOS</title>
    <link rel="icon" type="image/x-icon" href="./img/logo-64.png" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700;900&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./css/style.css" />
    <link rel="stylesheet" href="./css/media.css" />
    <script src="https://unpkg.com/ionicons@latest/dist/ionicons.js"></script>
    <script defer src="./script.js"></script>
    <style>
      /* Styles for the popup */
      .popup {
          display: none;
          position: fixed;
          width: 50%;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          background-color: #fff;
          padding: 20px;
          border-radius: 5px;
          box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
          z-index: 1000;
      }
      /* Styles for the overlay */
      .overlay {
          display: none;
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background-color: rgba(0, 0, 0, 0.5);
          z-index: 999;
      }
      #emailPopup input{
        border: 0;
      }
  </style>

  </head>
  <body>
    <section>
      <header class="header">
        <div class="left-area flex">
          <div class="menu hover">
            <span class="icon"></span>
            <span class="icon"></span>
            <span class="icon"></span>
          </div>
          <img src="./img/logo-24.png" alt="logo" />
          <span class="mail-text">Gmail</span>
        </div>
        <div class="middle-area">
          <div class="search">
            <ion-icon name="search-outline" class="hover"></ion-icon>
            <input type="search" placeholder="Search mail" />
          </div>
        </div>
        <div class="right-area flex">
          <ion-icon name="help-circle-outline" class="hover"></ion-icon>
          <ion-icon name="settings-outline" class="hover"></ion-icon>
          <ion-icon name="apps" class="hover"></ion-icon>
          <img src="./img/man.jpg" alt="user-photo" />
        </div>
      </header>
      <nav>
        <div class="nav_container">
          <div class="nav_top">
            <span onclick="openPopup()">
                <ion-icon name="pencil"></ion-icon> Compose
            </span>
        </div>
          <div class="nav_middle">
            <ul>
              <li>
                <a href="#">
                  <ion-icon name="image-outline"></ion-icon>
                  Inbox
                </a>
                <span>4</span>
              </li>
              <li>
                <a href="#">
                  <ion-icon name="star-outline"></ion-icon>
                  Starred
                </a>
              </li>
              <li>
                <a href="#">
                  <ion-icon name="time-outline"></ion-icon>
                  Snoozed
                </a>
              </li>
              <li>
                <a href="#">
                  <ion-icon name="send-outline"></ion-icon>
                  Sent
                </a>
              </li>
              <li>
                <a href="#">
                  <ion-icon name="document-outline"></ion-icon>
                  Draft
                </a>
              </li>
              <li>
                <a href="#">
                  <ion-icon name="chevron-down-outline"></ion-icon>
                  More
                </a>
              </li>
            </ul>
          </div>
          <div class="nav_bottom">
            <span>Labels</span>
            <ion-icon name="add" class="hover"></ion-icon>
          </div>
        </div>
      </nav>
      <main class="main_content">
        <div class="top">
          <div class="left">
            <div class="check">
              <img src="./img/checkbox.png" alt="" />
              <span> <ion-icon name="checkmark"></ion-icon> </span>
              <ion-icon name="caret-down-outline"></ion-icon>
            </div>
            <ion-icon
              name="reload-outline"
              class="hover content-icon"
            ></ion-icon>
            <ion-icon
              name="ellipsis-vertical"
              class="hover content-icon"
            ></ion-icon>
          </div>
          <div class="right">
            <div class="sort_numbers hover">1-50 of 94</div>
            <ion-icon
              name="chevron-back-outline"
              class="chev content-icon"
            ></ion-icon>
            <ion-icon
              name="chevron-forward-outline"
              class="hover content-icon"
            ></ion-icon>
          </div>
        </div>
        <div class="messages_area">
          <!-- <div class="messages">
            <div class="messages_left">
              <div class="check check_2">
                <img src="./img/checkbox.png" alt="" />
                <span> <ion-icon name="checkmark"></ion-icon> </span>
              </div>
              <ion-icon name="star-outline" class="hover star"></ion-icon>
              <span>Twitter</span>
            </div>
            <div class="messages_content">
              Lorem ipsum dolor sit amet consectetur adipisicing elit.
              Voluptatum deleniti, eligendi vitae explicabo accusamus,
              distinctio molestias a nisi tempore modi dolores debitis
              laboriosam? Delectus laudantium, in minima sed eum consectetur!
            </div>
            <div class="messages_date">Dec,28</div>
          </div> -->
        </div>
      </main>
      <aside>
        <div class="aside_icons">
          <img src="./img/calendar-48.png" alt="" class="hover" />
          <img src="./img/keep-48.png" alt="" class="hover" />
          <img src="./img/task-48.png" alt="" class="hover" />
          <img src="./img/account-48.png" alt="" class="hover" />
          <span></span>
          <ion-icon name="add" class="hover"></ion-icon>

          <div>
            <ion-icon name="chevron-forward-outline" class="hover"></ion-icon>
          </div>
        </div>
      </aside>

    </section>
    <!-- Popup content -->
      <div id="emailPopup" class="popup">
          <h2 style="padding: 5px;">Compose Email</h2><hr><br>
          <form id="emailForm" onsubmit="sendEmail(event)">
              <label for="recipient">Recipient:</label>
              <input type="email" id="recipient" required style="height: 30px; width:50%; padding-top: 5px;"><br><br> 
              <label for="subject">Subject:</label>
              <input type="text" id="subject" required style="height: 30px; width:50%; padding-top: 5px;"><br><br> 
              <label for="message">Message:</label><br>
              <textarea id="message" rows="6" cols="43" required style="width: 80%; height: 149px;"></textarea><br><br >
              <button style="padding: 5px;border-radius: 5px;background-color: blue;color:white;" type="submit">Send Email</button>
              <button style="padding: 5px;border-radius: 5px;background-color: blue;color:white;" type="button" onclick="closePopup()">Cancel</button>
          </form>
      </div>

      <!-- Overlay -->
      <div id="overlay" class="overlay"></div>
      <script>
        // Function to open the popup
        function openPopup() {
            document.getElementById('emailPopup').style.display = 'block';
            document.getElementById('overlay').style.display = 'block';
        }

        // Function to close the popup
        function closePopup() {
            document.getElementById('emailPopup').style.display = 'none';
            document.getElementById('overlay').style.display = 'none';
        }

        // Function to send email (replace with your actual email sending logic)
        function sendEmail(event) {
            event.preventDefault(); // Prevent form submission

            // Retrieve form data
            var recipient = document.getElementById('recipient').value;
            var subject = document.getElementById('subject').value;
            var message = document.getElementById('message').value;

            // Replace this with your email sending logic
            // For example, you can use AJAX to send the email to a server-side script
            // or use a third-party email service API
            console.log('Sending email to:', recipient);
            console.log('Subject:', subject);
            console.log('Message:', message);

            // Close the popup after sending email
            closePopup();
        }
        // Function to open the popup
        function openPopup() {
            document.getElementById('emailPopup').style.display = 'block';
            document.getElementById('overlay').style.display = 'block';
        }

        // Function to close the popup
        function closePopup() {
            document.getElementById('emailPopup').style.display = 'none';
            document.getElementById('overlay').style.display = 'none';
        }

        // Function to send email (replace with your actual email sending logic)
        function sendEmail(event) {
            event.preventDefault(); // Prevent form submission

            // Retrieve form data
            var recipient = document.getElementById('recipient').value;
            var subject = document.getElementById('subject').value;
            var message = document.getElementById('message').value;

            // Constructing the JSON body
            var body = JSON.stringify({
                "senderMail": "", // Add sender email if necessary
                "recipientMail": recipient,
                "message": message
            });

            // Sending POST request
            fetch('http://localhost:8080/send/send-email', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: body
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                // Handle success
                console.log('Email sent successfully');
                // You can add any additional handling here, such as showing a success message to the user
            })
            .catch(error => {
                // Handle errors
                console.error('There was a problem with the fetch operation:', error);
                // You can add any additional error handling here, such as showing an error message to the user
            });

            // Close the popup after sending email
            closePopup();}
    </script>

  </body>
</html>
